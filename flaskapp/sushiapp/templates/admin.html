{% extends 'base.html' %}

{% block title %}Admin{% endblock %}

{% block js %}
<script>
async function submitNewItem() {
	const nameVal = document.getElementById('nameField').value;
	const priceVal = document.getElementById('priceField').value;
	const statusDiv = document.getElementById('status');
	const response = await fetch("/api/item/new", {
		method: 'POST',
		body: JSON.stringify({
			name: nameVal,
			price: priceVal
		}),
		headers: {
			"Content-type": "application/json; charset=UTF-8"
		},
		credentials: 'include'
	});
	let status = await response.status;
	let data = await response.text();
	if (status == 200) {
		statusDiv.style.backgroundColor = "green";
		statusDiv.innerHTML = "Successfully added " + nameVal + "!";
	} else {
		statusDiv.style.backgroundColor = "red";
		statusDiv.innerHTML = data;
	}
}
</script>
{% endblock %}

{% block content %}
<div id="status" style="background-color: green;"></div>
<label for="name">Name</label>
<input name="name" id="nameField" type="text"/><br>
<label for="price">Price</label>
<input name="price" id="priceField" type="text"/><br>
<button onclick="submitNewItem()">Submit</button>
{% endblock %}